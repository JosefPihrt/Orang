(?mx)
^
\#if[^\r\n]*\r?\n
(
  (?!\#endif)[^\r\n]*\r?\n
)*
\#endif[^\r\n]*\r?\n
